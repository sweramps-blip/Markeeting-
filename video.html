<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Power Star | Auto Video System</title>
    <script src="https://www.youtube.com/iframe_api"></script>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; text-align: center; padding: 20px; }
        #ad-box { display: block; border: 2px solid #333; padding: 30px; border-radius: 15px; max-width: 450px; margin: 50px auto; }
        .btn-ad { background: #ff9800; color: #000; padding: 15px 25px; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; font-size: 18px; }
        #timer { font-size: 24px; color: #ffeb3b; margin-top: 20px; display: none; }
        #player-container { display: none; }
        iframe { width: 100%; max-width: 600px; height: 350px; border-radius: 10px; }
    </style>
</head>
<body>

    <div id="ad-box">
        <h2 id="msg">Unlock Video</h2>
        <p>Next video dekhne ke liye neechay click karain aur 30 second wait karain.</p>
        <button id="unlock-btn" class="btn-ad" onclick="startAdTimer()">WATCH AD & UNLOCK</button>
        <div id="timer">Video starts in: <span id="count">30</span>s</div>
    </div>

    <div id="player-container">
        <div id="player"></div>
    </div>

    <script>
        const videoList = ["FUwkXDdakn8", "GBXBH4uqbAo", "nkkmQzxytw4", "sTqo8B2OCLo"];
        let currentIdx = 0;
        let player;
        const adLink = "https://www.effectivegatecpm.com/fgnsd0zn?key=040535026948793c010dcd8d1c86e224";

        // 1. YouTube API Player Setup
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '350',
                width: '100%',
                videoId: videoList[currentIdx],
                events: {
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        // 2. Video Khatam honay ka check
        function onPlayerStateChange(event) {
            if (event.data === YT.PlayerState.ENDED) {
                currentIdx++;
                if (currentIdx < videoList.length) {
                    // Video khatam, ab wapis Ad dikhao
                    document.getElementById("player-container").style.display = "none";
                    document.getElementById("ad-box").style.display = "block";
                    document.getElementById("unlock-btn").style.display = "inline-block";
                    document.getElementById("timer").style.display = "none";
                    document.getElementById("msg").innerText = "Unlock Next Video (" + (currentIdx + 1) + ")";
                } else {
                    alert("Tamam videos khatam ho gayin!");
                }
            }
        }

        // 3. Ad Timer Logic
        function startAdTimer() {
            window.open(adLink, "_blank"); // Ad Link open hoga
            
            document.getElementById("unlock-btn").style.display = "none";
            document.getElementById("timer").style.display = "block";
            
            let timeLeft = 30;
            let countdown = setInterval(() => {
                timeLeft--;
                document.getElementById("count").innerText = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(countdown);
                    playNextVideo();
                }
            }, 1000);
        }

        // 4. Video Play karain
        function playNextVideo() {
            document.getElementById("ad-box").style.display = "none";
            document.getElementById("player-container").style.display = "block";
            player.loadVideoById(videoList[currentIdx]);
            player.playVideo();
        }
    </script>
</body>
</html>
